.. _vector.dgnv8:

마이크로스테이션 DGN v8
===================

.. versionadded:: 2.2

.. shortname:: DGNv8

.. build_dependencies:: Open Design Alliance Teigha library

DGN 드라이버는 마이크로스테이션(Microstation) 버전 8이 생성한 DGN 파일 읽기 및 쓰기를 지원합니다. 각 파일의 모델은 OGR 레이어로 표현됩니다.

이 드라이버는 (오픈 소스가 아닌) 오픈 디자인 얼라이언스의 Teigha 라이브러리를 대상으로 빌드되어야 합니다.

DGN 파일은 OGR를 통한 지리참조 정보를 가지고 있지 않다고 간주됩니다. 모든 객체는 다음과 같은 일반 속성들을 가질 것입니다:

-  Type: 아래 "지원 요소"에 있는 정수 유형 코드입니다.

-  Level: DGN 수준 번호입니다.

-  GraphicGroup: 그래픽 그룹 번호입니다.

-  ColorIndex: DGN 색상표의 색상 색인입니다.

-  Weight: 요소에 대한 도면 가중치(굵기)입니다.

-  Style: 요소에 대한 스타일 값입니다.

-  ULink: 사용자 데이터 링크입니다. (각 요소마다 사용자 데이터 링크가 여러 개 존재할 수도 있습니다.)

드라이버 케이퍼빌리티
-------------------

.. supports_create::

.. supports_georeferencing::

.. supports_virtualio::

지원 요소
------------------

읽기 작업 시 다음과 같은 요소 유형들을 지원합니다:

-  Cell Header (2): 구멍이 있는 폴리곤에 사용

-  Line (3): 라인 (포인트 2개) 도형

-  Line String (4): 다중 선분 라인 도형

-  Shape (6): 폴리곤 도형

-  TextNode (7): 텍스트 요소의 컨테이너

-  Curve (11): 라인 도형에 가깝게 취급합니다.

-  ComplexString (12): 라인스트링 또는 복합 곡선(compound curve)으로 취급합니다.

-  ComplexShape (14): 폴리곤 또는 만곡 폴리곤(curve polygon)으로 취급합니다.

-  Ellipse (15): 라인 도형 또는 원호(circular string)에 가깝게 취급합니다.

-  Arc (16): 라인 도형 또는 원호(circular string)에 가깝게 취급합니다.

-  Text (17): 포인트 도형으로 취급합니다.

-  B-Spline (21): 라인 도형으로 취급합니다.

-  PointString (22): 멀티포인트로 취급합니다.

-  Shared cell reference (35): 포인트로 취급합니다.

일반적으로 복잡 객체들의 모든 개념 및 관련 구성요소로서의 셀들을 누락시킵니다. 복잡 객체의 각 구성요소 또는 셀을 독립 객체로 취급합니다.

사용자 데이터 링크
-----------------

DGN 요소 하나가 사용자 데이터 링크(user data linkage) 여러 개를 가질 수도 있습니다. 각 링크는 사용자 ID, 응용 프로그램 ID 그리고 수많은 단어로 된 데이터를 가지고 있습니다. 사용자 데이터 링크 산출물은 서로 다른 각 응용 프로그램 ID별로 데이터를 리포트합니다.

알려지지 않은 응용 프로그램 ID의 경우, 원시(raw) 데이터를 16진법 단어(16비트)로 리포트합니다. 사용자가 응용 프로그램 ID에 따라 사용자 원시 데이터를 어떻게 디코딩할지를 결정해야 합니다.

스타일 작업 정보
-------------------

ColorIndex, Weight 및 Style 일반 속성으로부터 객체에 관한 몇몇 도면(drawing) 정보를 추출할 수 있습니다. 하지만 모든 객체에 대해 OGR 스타일 문자열을 지원하는 응용 프로그램에 사용할 준비가 끝난 형식으로 인코딩된 값들로 OGR 스타일 문자열이 준비되어 있습니다.

여러 유형의 선형 도형들이 색상, 굵기 및 (점선, 실선 등과 같은) 라인 스타일을 나타내는 스타일 정보를 포함할 것입니다.

폴리곤(Shape 요소)은 경계 정보는 물론 지정된 경우 채우기 색상 정보도 포함할 것입니다. 채우기 패턴은 지원하지 않습니다.

텍스트 요소는 스타일 문자열에 텍스트, 각도, 색상 및 (지표 단위로 표현된) 크기 정보를 담을 것입니다.

메타데이터
--------

DGN 헤더에 데이터셋 생성 옵션으로 (아래 참조) 여러 가지 메타데이터 항목들을 설정하거나, "DGN" 메타데이터 도메인으로부터 여러 가지 메타데이터 항목들을 가져올 수 있습니다.

생성 문제점
---------------

제한 사항들을 가진 2차원 DGN 파일을 OGR로 작성할 수도 있습니다:

-  산출 객체는 일반적인 고정 DGN 속성을 가집니다. 다른 필드를 생성하려는 시도는 실패할 것입니다.

-  LABEL(텍스트, 글꼴 이름, 크기, 각도, 색상), PEN(색상) 및 BRUSH(채우기 색상) 도구의 몇 가지 속성에 대해서만 OGR 객체 스타일 문자열을 DGN 표현 정보로 다시 변환할 수 있습니다.

-  텍스트가 아닌 (Text가 NULL이고 객체 스타일 문자열은 LABEL이 아닌) POINT 도형을 퇴화된 (길이가 0인) 라인 요소로 변환할 것입니다.

-  시드 파일의 "설계 평면(design plane)" 바깥에 있는 도형들을 폐기하거나, 또는 예상할 수 없는 방식으로 손상시킬 것입니다.

데이터셋 생성 옵션
------------------

-  **SEED=filename**:
   사용할 시드 파일을 지정합니다.

-  **COPY_SEED_FILE_COLOR_TABLE=YES/NO**:
   시드 파일로부터 색상표를 복사해야 할지 여부를 선택합니다. SEED 옵션이 지정된 경우에만 연산에 넣습니다. 기본값은 NO입니다.

-  **COPY_SEED_FILE_MODEL=YES/NO**:
   시드 파일로부터 기존 모델을 (모델의 그래픽 콘텐츠 없이) 복사해야 할지 여부를 선택합니다. 모델이 링크된 뷰 그룹 및 명명된 뷰도 복사합니다. SEED 옵션이 지정된 경우에만 연산에 넣습니다. 기본값은 YES입니다.

-  **COPY_SEED_FILE_MODEL_CONTROL_ELEMENTS=YES/NO**:
   시드 파일로부터 기존 모델의 제어 요소들을 복사해야 할지 여부를 선택합니다. COPY_SEED_FILE_MODEL=YES인 경우에만 연산에 넣습니다. 기본값은 YES입니다.

-  **APPLICATION=string**:
   헤더에 Application 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다. 그렇게 하지 못 하는 경우 사용한 GDAL 및 Teigha 라이브러리의 버전을 언급합니다.

-  **TITLE=string**:
   헤더에 Title 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.
   
-  **SUBJECT=string**:
   헤더에 Subject 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **AUTHOR=string**:
   헤더에 Author 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **KEYWORDS=string**:
   헤더에 Keywords 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **TEMPLATE=string**:
   헤더에 Template 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **COMMENTS=string**:
   헤더에 Comments 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **LAST_SAVED_BY=string**:
   헤더에 LastSavedBy 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **REVISION_NUMBER=string**:
   헤더에 RevisionNumber 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **CATEGORY=string**:
   헤더에 Category 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **MANAGER=string**:
   헤더에 Manager 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **COMPANY=string**:
   헤더에 Company 필드를 설정합니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

레이어 생성 옵션
----------------

-  **DESCRIPTION=string**:
   레이어와 관련된 설명입니다. 지정하지 않는 경우, 시드 파일로부터 파생시킵니다.

-  **DIM=2/3**:
   레이어의 차원을 (예: 2차원 대 3차원으로) 설정합니다. 시드 파일로부터 모델을 재사용하지 않는 한 기본값은 3입니다.


빌드 작업
--------

GDAL을 ODA 지원과 함께 빌드하려면 :ref:`ODA 플랫폼 지원 <vector.oda>` 을 참조하십시오.

.. toctree::
   :hidden:

   oda

참고
----

-  :ref:`DGN (v7) <vector.dgn>` 드라이버

-  :ref:`ogr_feature_style`

